└── Cloudflare-Manager
    ├── templates
    │   ├── index.html
    │   ├── _navbar.html
    │   ├── pending.html
    │   ├── _table.html
    │   ├── reactivate.html
    │   └── _base.html
    ├── requirements.txt
    ├── .gitignore
    ├── app.py
    └── .env.example


./requirements.txt
blinker==1.6.2
certifi==2023.7.22
charset-normalizer==3.2.0
click==8.1.6
Flask==2.3.2
idna==3.4
itsdangerous==2.1.2
Jinja2==3.1.2
MarkupSafe==2.1.3
python-dotenv==1.0.0
requests==2.31.0
urllib3==2.0.4
Werkzeug==2.3.6



./.gitignore
.env
env/
cc.py
PROJECT_SUMMARY.text



./app.py
# app.py

from flask import Flask, render_template
import requests
import os

app = Flask(__name__)

# Load Cloudflare API credentials from environment variables
CLOUDFLARE_EMAIL = os.getenv('CLOUDFLARE_EMAIL')
CLOUDFLARE_KEY = os.getenv('CLOUDFLARE_KEY')
CLOUDFLARE_ACCOUNT_ID = os.getenv('CLOUDFLARE_ACCOUNT_ID')


@app.route('/')
def index():
    """
    Endpoint to display all zones.
    Renders the index page with a table listing all Cloudflare zones.
    """
    zones = get_all_zones()
    return render_template('index.html', zones=zones, title="All Zones", account_id=CLOUDFLARE_ACCOUNT_ID)

@app.route('/reactivate.html')
def reactivate():
    """
    Endpoint to display paused zones and offer reactivation.
    Renders the Reactivate page with a table listing paused Cloudflare zones.
    """
    paused_zones = get_paused_zones()
    return render_template('reactivate.html', zones=paused_zones, title="Paused Zones", account_id=CLOUDFLARE_ACCOUNT_ID)

@app.route('/pending.html')
def pending():
    """
    Endpoint to display zones with a 'pending' status.
    Renders the Pending page with a table listing Cloudflare zones that are pending.
    """
    pending_zones = get_zones_by_status('pending')
    return render_template('pending.html', zones=pending_zones, title="Pending Zones", account_id=CLOUDFLARE_ACCOUNT_ID)

def get_all_zones():
    """
    Function to retrieve all zones from Cloudflare.
    """
    return get_zones_with_params({'per_page': 50})

def get_paused_zones():
    """
    Function to retrieve paused zones from Cloudflare.
    """
    return get_zones_by_status('paused')

def get_zones_by_status(status):
    """
    Function to retrieve zones from Cloudflare based on their status.
    """
    return get_zones_with_params({'status': status, 'per_page': 50})

def get_zones_with_params(params):
    """
    Helper function to retrieve zones based on provided parameters.
    """
    url = "https://api.cloudflare.com/client/v4/zones"
    headers = {
        'X-Auth-Email': CLOUDFLARE_EMAIL,
        'X-Auth-Key': CLOUDFLARE_KEY
    }

    all_zones = []
    page = 0
    total_pages = 1  # Default to 1 for first iteration

    while page < total_pages:
        page += 1  # Increment page number
        params['page'] = page

        response = requests.get(url, headers=headers, params=params)
        if response.status_code == 200:
            result = response.json()
            all_zones.extend(result.get('result', []))
            
            # Update total_pages based on result_info from Cloudflare
            total_pages = result.get('result_info', {}).get('total_pages', 1)
        else:
            print(f"Failed to fetch zones for page {page}. Reason: {response.text}")

    return all_zones

if __name__ == '__main__':
    app.run(debug=True)



./templates/index.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Zones</title>
    <!-- Styles for DataTables and Bootstrap -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#" style="color: white;">Cloudflare Manager</a>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" href="reactivate.html" style="color: white;">Reactivate URLs</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="pending.html" style="color: white;">Pending URLs</a>
      </li>
    </ul>
  </div>
</nav>

<!-- Zones Table -->
<div class="container mt-3">
    {% include '_table.html' %}
</div>

<!-- DataTable Initialization -->
<script>
    $(document).ready(function() {
        $('#zonesTable').DataTable({
            "pageLength": 50 // Display 50 rows by default
        });
    });
</script>
</body>
</html>



./templates/_navbar.html
<!-- 
    Navbar Component for Cloudflare Manager
    ---------------------------------------
    This component provides a consistent navigation bar across the web application.

    Structure:
    - The outermost <nav> element uses Bootstrap classes to style and format the navbar.
    - The <a class="navbar-brand"> tag is the leftmost element in the navbar, representing the app's name or logo.
    - The <div class="collapse navbar-collapse"> contains the actual navigation links. 
        - These links are arranged in a list format using <ul> and <li> tags.
        - Each <li> contains an <a> tag, which is a clickable link to various parts of the application.
        - The "ml-auto" class on the <ul> pushes the links to the right side of the navbar.

    Navigation Links:
    - "All URLs" directs the user to the main page that lists all the Cloudflare URLs.
    - "Reactivate URLs" directs the user to a page that lists paused Cloudflare URLs and offers reactivation.
    - "Pending URLs" directs the user to a page that lists all URLs with a "Pending" status.
-->

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <!-- Branding: Cloudflare Manager title or logo -->
    <a class="navbar-brand" href="/">Cloudflare Manager</a>
    
    <!-- Container for navigation links -->
    <div class="collapse navbar-collapse" id="navbarNav">
        <!-- Navigation links list -->
        <ul class="navbar-nav ml-auto">
            <!-- All URLs Link -->
            <li class="nav-item">
                <a class="nav-link" href="/">All URLs</a>
            </li>
            
            <!-- Reactivate URLs Link -->
            <li class="nav-item">
                <a class="nav-link" href="reactivate">Reactivate URLs</a>
            </li>
            
            <!-- Pending URLs Link -->
            <li class="nav-item">
                <a class="nav-link" href="pending">Pending URLs</a>
            </li>
        </ul>
    </div>
</nav>



./templates/pending.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pending URLs</title>
    <!-- Styles for DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#" style="color: white;">Cloudflare Manager</a>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" href="/" style="color: white;">All URLs</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="reactivate.html" style="color: white;">Reactivate URLs</a>
      </li>
    </ul>
  </div>
</nav>

<!-- Zones Table -->
<div class="container mt-3">
    {% include '_table.html' %}
</div>

<!-- DataTable Initialization -->
<script>
    $(document).ready(function() {
        $('#zonesTable').DataTable({
            "pageLength": 50 // Display 50 rows by default
        });
    });
</script>
</body>
</html>



./templates/_table.html
<!-- _table.html -->
<!--
This partial template is responsible for displaying a table of Cloudflare zones.
It accepts a list of zones as its context and renders each zone as a row in the table.
-->

<!-- Embedding styles for the table -->
<style>
    /* Center the container in the viewport */
    .container {
        display: flex;
        justify-content: center;
    }

    /* Apply specific styles to the DataTable */
    #zonesTable {
        width: 100%;  /* This ensures the table takes the full width of its container */
    }
</style>


<!-- Table to display Cloudflare zones -->
<div class="container mt-3">
    <table id="zonesTable" class="display" style="width:100%;">
        <thead>
            <tr>
                <!-- The primary domain of the Cloudflare zone -->
                <th>Domain</th> 
                <!-- The operational status of the zone (e.g., "active", "paused", "pending") -->
                <th>Status</th> 
                <!-- Type of domain. Full zones proxy all traffic through Cloudflare; partial zones only the traffic specified -->
                <th>Type</th> 
                <!-- The subscription plan level (e.g., "free", "pro", "business") -->
                <th>Plan</th> 
                <!-- Cloudflare-assigned nameservers for this zone -->
                <th>Name Servers</th> 
                <!-- Original nameservers, before switching to Cloudflare -->
                <th>Original Name Servers</th> 
                <!-- Date and time the zone was added to Cloudflare -->
                <th>Created On</th> 
                <!-- Date and time of the last modification to the zone -->
                <th>Modified On</th> 
                <!-- A button to navigate to Cloudflare for further adjustments -->
                <th>Adjust</th> 
            </tr>
        </thead>
        <tbody>
            {% for zone in zones %}
            <tr>
                <td>{{ zone.name or 'N/A' }}</td>
                <td>{{ zone.status or 'N/A' }}</td>
                <td>{{ zone.type or 'N/A' }}</td>
                <td>{{ zone.plan.name if zone.plan else 'N/A' }}</td>
                <td>{{ zone.name_servers|join(", ") if zone.name_servers else 'N/A' }}</td>
                <td>{{ zone.original_name_servers|join(", ") if zone.original_name_servers else 'N/A' }}</td>
                <td>{{ zone.created_on or 'N/A' }}</td>
                <td>{{ zone.modified_on or 'N/A' }}</td>
                <!-- This button links to the Cloudflare dashboard for the specific zone, allowing for further adjustments -->
                <td><a href="https://dash.cloudflare.com/{{ account_id }}/zones/{{ zone.id }}" target="_blank" class="btn btn-primary">Adjust</a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>



./templates/reactivate.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reactivate URLs</title>
    <!-- Styles for DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#" style="color: white;">Cloudflare Manager</a>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" href="/" style="color: white;">All URLs</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="pending.html" style="color: white;">Pending URLs</a>
      </li>
    </ul>
  </div>
</nav>

<!-- Zones Table -->
<div class="container mt-3">
    {% include '_table.html' %}
</div>

<!-- DataTable Initialization -->
<script>
    $(document).ready(function() {
        $('#zonesTable').DataTable({
            "pageLength": 50 // Display 50 rows by default
        });
    });
</script>
</body>
</html>



./templates/_base.html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Title for the page, can be overridden by child templates -->
    <title>{% block title %}Cloudflare Manager{% endblock %}</title>

    <!-- External Styles: DataTables and Bootstrap -->
    <!-- DataTables is a jQuery plugin that adds advanced interaction controls to HTML tables like pagination, sorting, and searching. -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">

    <!-- Bootstrap is a front-end framework that provides tools for creating responsive and mobile-first websites. -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <!-- jQuery is a fast and concise JavaScript Library that simplifies HTML document traversing, event handling, and animating for rapid web development. -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- DataTables JavaScript library which provides the functionality for the advanced interaction controls. -->
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

    <!-- Internal Styles -->
    <!-- main.css contains the custom styles for the application. Using Flask's url_for function, we can generate URLs to serve static files. -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>

<body>

    <!-- Navbar for the application. This is common across all pages and provides navigation links. -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/">Cloudflare Manager</a>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">All URLs</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="reactivate">Reactivate URLs</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="pending">Pending URLs</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content Area -->
    <!-- This is where the specific content for each page will be injected. The block allows child templates to replace this section with their content. -->
    {% block content %}
    {% endblock %}

</body>

</html>



./.env.example
CLOUDFLARE_EMAIL=Account_Email
CLOUDFLARE_KEY=global_api_key
CLOUDFLARE_ACCOUNT_ID=your_account_id_here

